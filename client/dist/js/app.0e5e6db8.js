(function(){"use strict";var t={7742:function(t,e,i){var n=i(5507),a=i(3396),s=i(7139),o=i.p+"img/DraadDetectinator.91de12c8.png";const c={class:"tag"},r={class:"columns is-desktop content"},l={class:"column is-half"},d={class:"grid left"},u={class:"item1 left"},p=(0,a._)("h3",{class:"title is-3"},"Oscilloscope",-1),m={class:"item2 left"},h={class:"columns is-mobile"},f={class:"column is-half"},v=(0,a._)("h5",{class:"title is-5 tight"},"General",-1),g={class:"datalist"},_={class:"column is-half"},b=(0,a._)("h5",{class:"title is-5 tight"},"Peaks",-1),y={class:"datalist"},w={class:"column is-half"},D={class:"grid right"},k={class:"item1"},x=(0,a._)("h3",{class:"title is-3"},"Device info",-1),V=(0,a._)("h5",{class:"title is-5"},"Activated sensors",-1),S={class:"columns is-mobile"},O={class:"column is-one-quarter"},F={class:"columns is-gapless is-multiline"},P=(0,a._)("div",{class:"column"},[(0,a._)("img",{src:o,class:"detectorImage"})],-1),C={class:"item2"},L=(0,a._)("h5",{class:"title is-5 margin-top"},"LCD",-1),j={class:"LCD"},M=(0,a._)("br",null,null,-1);function T(t,e,i,n,o,T){const z=(0,a.up)("HeaderBar"),W=(0,a.up)("OscilloscopeComponent");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(z,{disconnected:o.disconnected},null,8,["disconnected"]),(0,a._)("span",c," Last updated: "+(0,s.zw)(T.getDatetimeFromTimestamp()),1),(0,a._)("div",r,[(0,a._)("div",l,[(0,a._)("div",d,[(0,a._)("div",u,[p,(0,a.Wm)(W,{"chart-point-data":o.osciPointData,"css-classes":"chart"},null,8,["chart-point-data"])]),(0,a._)("div",m,[(0,a._)("div",h,[(0,a._)("div",f,[v,(0,a._)("ul",g,[(0,a._)("li",null,"Vmax = "+(0,s.zw)(parseFloat(o.Vmax).toFixed(2))+" V",1),(0,a._)("li",null,"Vmin = "+(0,s.zw)(parseFloat(o.Vmin).toFixed(2))+" V",1),(0,a._)("li",null,"Vavg = "+(0,s.zw)(parseFloat(o.osciPointData[1].reduce(((t,e)=>t+e),0)/o.osciPointData[1].length).toFixed(2))+" V",1)])]),(0,a._)("div",_,[b,(0,a._)("ul",y,[(0,a._)("li",null,"Vptp = "+(0,s.zw)(parseFloat(o.Vptp).toFixed(2))+" V",1),(0,a._)("li",null,"Vmax - Vmin = "+(0,s.zw)(parseFloat(o.Vmax-o.Vmin).toFixed(2))+" V",1),(0,a._)("li",null,"Peak width = "+(0,s.zw)(parseFloat(o.peakWidth).toFixed(2))+" ms",1)])])])])])]),(0,a._)("div",w,[(0,a._)("div",D,[(0,a._)("div",k,[x,V,(0,a._)("div",S,[(0,a._)("div",O,[(0,a._)("div",F,[((0,a.wg)(),(0,a.iD)(a.HY,null,(0,a.Ko)(5,(t=>(0,a._)("div",{class:(0,s.C_)(["column is-full sensor",T.isSwitchActivated(o.activatedSwitches,t)?"activated":""]),key:t},null,2))),64))])]),P])]),(0,a._)("div",C,[L,(0,a.Uk)(" Current mode: "+(0,s.zw)(T.currentModeName)+" ",1),(0,a._)("div",null,[(0,a._)("div",j,[(0,a.Uk)((0,s.zw)(o.lcdFirstLine),1),M,(0,a.Uk)(" "+(0,s.zw)(o.lcdSecondLine),1)])])])])])])],64)}var z=i(2525);const W={class:"navbar",role:"navigation","aria-label":"main navigation"},I={class:"navbar-brand"},N=(0,a._)("div",{class:"navbar-item navbar-name"}," Draad Detectinator ",-1),A={class:"navbar-item"},Z={class:"button"},B={class:"icon"},H={class:"icon-text",id:"disconnected"},K={class:"icon"},U={class:"fa-stack fa-lg"},Y=(0,a._)("span",null,"Disconnected",-1);function G(t,e,i,n,o,c){const r=(0,a.up)("font-awesome-icon");return(0,a.wg)(),(0,a.iD)("nav",W,[(0,a._)("div",I,[N,(0,a._)("div",A,[(0,a._)("button",Z,[(0,a._)("span",B,[(0,a.Wm)(r,{icon:"fa-solid fa-pause"})])])]),(0,a._)("div",{class:(0,s.C_)(["navbar-item",i.disconnected?"":"invisible"])},[(0,a._)("span",H,[(0,a._)("span",K,[(0,a._)("span",U,[(0,a.Wm)(r,{icon:"fa-solid fa-server",class:"fa-stack-1x"}),(0,a.Wm)(r,{icon:"fa-solid fa-slash",class:"fa-stack-1x"})])])]),Y],2)])])}var q={props:["disconnected"],data(){return{}}},E=i(89);const R=(0,E.Z)(q,[["render",G]]);var X=R;function Q(t,e,i,n,s,o){const c=(0,a.up)("Scatter");return(0,a.wg)(),(0,a.j4)(c,{"chart-options":s.chartOptions,"chart-data":o.chartData,"chart-id":i.chartId,"dataset-id-key":i.datasetIdKey,plugins:i.plugins,"css-classes":i.cssClasses,styles:i.styles},null,8,["chart-options","chart-data","chart-id","dataset-id-key","plugins","css-classes","styles"])}var $=i(6294),J=i(741);J.kL.register(J.qi,J.jn,J.ZL,J.od,J.vn,J.N0,J.jI,J.ST,J.tt,J.CV,J.Xi,J.ho,J.uw,J.f$,J.WV,J.l7,J.FB,J.RM,J.WY,J.Gu,J.De,J.Dx,J.u,J.DK);var tt={name:"OscilloscopeComponent",components:{Scatter:$.bp},props:{chartPointData:{type:Object,default:()=>{}},chartId:{type:String,default:"osci-chart"},datasetIdKey:{type:String,default:"label"},width:{type:Number,default:400},height:{type:Number,default:400},cssClasses:{default:"",type:String},styles:{type:Object,default:()=>{}},plugins:{type:Object,default:()=>{}}},computed:{chartData(){let t=this.chartPointData[0].map(((t,e)=>({x:t,y:this.chartPointData[1][e]})));return{datasets:[{label:"Voltage vs Time",data:t,backgroundColor:"#0099ff",borderColor:"#0099ff"}]}}},data(){return{chartOptions:{responsive:!0,maintainAspectRatio:!1,showLine:!0,animation:!1,scales:{y:{title:{display:!0,text:"Measured voltage (V)"},min:0,max:3.5},x:{title:{display:!0,text:"Time (ms)"}}}}}}};const et=(0,E.Z)(tt,[["render",Q]]);var it=et,nt={name:"App",components:{HeaderBar:X,OscilloscopeComponent:it},socket:{},data(){return this.oscichart={},{disconnected:!0,timestamp:1666337177e3,currentMode:0,activatedSwitches:0,Vmax:0,Vmin:0,Vptp:0,peakWidth:0,loopTime:0,osciPointData:[[0,1e3],[0,0]],lcdFirstLine:"",lcdSecondLine:""}},created(){this.socket=(0,z.io)("http://127.0.0.1:5000/")},mounted(){this.socket.on("connect",(()=>{this.disconnected=!1,console.log("[Socket] Connected to server.")})),this.socket.on("disconnect",(()=>{this.disconnected=!0,console.error("[Socket] Disconnected from server.")})),this.socket.on("data_update",(t=>{console.log(t),this.timestamp=t["timestamp"],this.loopTime=t["loopTime"];var e=t["voltageArray"],i=[];for(let n=0;n<e.length;n++)i[n]=n*t["loopTime"];this.osciPointData=[i,e],this.Vptp=t["Vptp"],this.Vmax=t["Vmax"],this.Vmin=Math.min(...this.osciPointData[1]),this.peakWidth=t["peakWidth"],this.currentMode=t["currentMode"],this.activatedSwitches=t["activatedSwitches"],this.lcdFirstLine=t["lcdFirstLine"].replace("\\approx","â‰ˆ"),this.lcdSecondLine=t["lcdSecondLine"]}))},methods:{getDatetimeFromTimestamp:function(){const t=new Date(this.timestamp);let e={timeZone:"Europe/Amsterdam",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",fractionalSecondDigits:3};return t.toLocaleString("nl-NL",e)},isSwitchActivated:function(t,e){return Boolean(t>>e-1&1)},getModeName:function(t){switch(t){case 0:return"Position";case 1:return"Depth"}}},computed:{currentModeName(){switch(this.currentMode){case 0:return"Position";case 1:return"Depth";default:return"Undefined"}}}};const at=(0,E.Z)(nt,[["render",T]]);var st=at,ot=i(3435),ct=i(4534),rt=i(9476);ot.vI.add(rt.XQY),ot.vI.add(rt.zc),ot.vI.add(rt.xf3),ot.vI.add(rt.u6k),(0,n.ri)(st).component("font-awesome-icon",ct.GN).mount("#app")}},e={};function i(n){var a=e[n];if(void 0!==a)return a.exports;var s=e[n]={exports:{}};return t[n](s,s.exports,i),s.exports}i.m=t,function(){var t=[];i.O=function(e,n,a,s){if(!n){var o=1/0;for(d=0;d<t.length;d++){n=t[d][0],a=t[d][1],s=t[d][2];for(var c=!0,r=0;r<n.length;r++)(!1&s||o>=s)&&Object.keys(i.O).every((function(t){return i.O[t](n[r])}))?n.splice(r--,1):(c=!1,s<o&&(o=s));if(c){t.splice(d--,1);var l=a();void 0!==l&&(e=l)}}return e}s=s||0;for(var d=t.length;d>0&&t[d-1][2]>s;d--)t[d]=t[d-1];t[d]=[n,a,s]}}(),function(){i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,{a:e}),e}}(),function(){i.d=function(t,e){for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){i.p="/"}(),function(){var t={143:0};i.O.j=function(e){return 0===t[e]};var e=function(e,n){var a,s,o=n[0],c=n[1],r=n[2],l=0;if(o.some((function(e){return 0!==t[e]}))){for(a in c)i.o(c,a)&&(i.m[a]=c[a]);if(r)var d=r(i)}for(e&&e(n);l<o.length;l++)s=o[l],i.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return i.O(d)},n=self["webpackChunkclient"]=self["webpackChunkclient"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=i.O(void 0,[998],(function(){return i(7742)}));n=i.O(n)})();
//# sourceMappingURL=app.0e5e6db8.js.map